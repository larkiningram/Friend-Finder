<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Survey</title>

    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- <link rel="stylesheet" href="assets/css/style.css"> -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <!-- <link href="https://fonts.googleapis.com/css?family=Lexend+Deca&display=swap" rel="stylesheet"> -->

</head>

<body>
    <div class="container text-center">
        <div class="jumbotron text-center">

            <h1> Survey </h1>

            <hr width="93%">

            <h4>
                Fill out the form below to be matched with your most compatible friend!
                <br>
                Rate each question based on whether you agree or disagree.
            </h4>
        </div>


        <div class="col-md-8" style="float:left">
            <form>
                <label class="question">What's your name?</label> <br>
                <input id="name" type="text"><br></br>

                <label class="question">Add a url for your profile picture</label> <br>
                <input type="url" name="pic" > <br></br>

                <label id="q1" class="question"></label>

                <label id="q2" class="question"></label>

                <label id="q3" class="question"></label>

                <label id="q4" class="question"></label>

                <label id="q5" class="question"></label>

                <label id="q6" class="question"></label>

                <label id="q7" class="question"></label>

                <label id="q8" class="question"></label>

                <label id="q9" class="question"></label>

                <label id="q10" class="question"></label>

                <button type="submit" id="sub-btn" class="btn btn-lg btn-dark"> Submit </button>

            </form>
        </div>
        <div class="col-md-2" style="float:right">
            <h2 class="here">You chose:</h2>
        </div>
    </div>

    <script type="text/javascript">

        var questions = [
            {
                question: "Pizza should always have pineapple on it.",
                name: "q1"
            },
            {
                question: "Top sheets are unnecessary and a waste of the water needed to wash them.",
                name: "q2"
            },
            {
                question: "The best and only way to use your iPhone alarm is to have an alarm setting for every possible time.",
                name: "q3"
            },
            {
                question: "Phone calls are more efficient than texting.",
                name: "q4"
            },
            {
                question: "The earth is flat.",
                name: "q5"
            },
            {
                question: "Vaccinations should be banned.",
                name: "q6"
            },
            {
                question: "Straws are fine.",
                name: "q7"
            },
            {
                question: "Boneless wings are the superior wing.",
                name: "q8"
            },
            {
                question: "There should be similar limitations to the places kids can go as there are for dogs.",
                name: "q9"
            },
            {
                question: "Steak should be fully cooked.",
                name: "q10"
            }
        ];

        function populate() {
            for (i in questions) {
                var question = questions[i].question;
                var currentQuestionNumber = (parseInt(i) + parseInt(1))
                $("#q" + currentQuestionNumber).append(question);
                var inp = '<br><input id="a' + currentQuestionNumber + '" class="rate" type="range" name="quantity" min="1" max="5"><br></br>'
                $("#q" + currentQuestionNumber).after(inp);
            };
        };

        populate();

        // function display(ideal) {
        //     var html = "<div class='modal'>"
        //     html += '<div class="modal-content">'
        //     html += '<span class="close">&times;</span><p>'
        //     html += ideal.name
        //     html += "</p></div></div>"
        //     console.log(html)
        //     $("form").html(html)
        // }
        for (i in questions) {
            var currentQuestionNumber = (parseInt(i) + parseInt(1))

            $("#a" + currentQuestionNumber).on("click", function () {
                var rating = $(this).val();
                console.log(rating)
                $(".here").html("<h2>You chose: </h2><h2>" + rating + "</h2>");
            })
        }

        $("#sub-btn").on("click", function (event) {
            event.preventDefault();
            var newResult = {
                name: $("#name").val(),
                photo: $("#photo").val(),
                scores: [
                    +$("#a1").val(),
                    +$("#a2").val(),
                    +$("#a3").val(),
                    +$("#a4").val(),
                    +$("#a5").val()
                ]
            };

            console.log(newResult);

            $.post("/api/friends", newResult)
                .then(function (data) {
                    console.log("friends: ", data);
                    alert("Adding friend...");
                });

            // display("john");
        })


    </script>
</body>

</html>